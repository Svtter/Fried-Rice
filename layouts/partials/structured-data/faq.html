{{- if .Params.faq -}}
    {{- $faqItems := slice -}}

    {{- /* Handle map format: faq: { "Question?": "Answer" } */ -}}
    {{- if reflect.IsMap .Params.faq -}}
        {{- range $question, $answer := .Params.faq -}}
            {{- $faqItems = $faqItems | append (dict "@type" "Question" "name" $question "acceptedAnswer" (dict "@type" "Answer" "text" $answer)) -}}
        {{- end -}}
    {{- else -}}
        {{- /* Handle array format: faq: [ { question: "Q?", answer: "A" } ] */ -}}
        {{- range $item := .Params.faq -}}
            {{- if reflect.IsMap $item -}}
                {{- with $item.question -}}
                    {{- with $item.answer -}}
                        {{- $faqItems = $faqItems | append (dict "@type" "Question" "name" $item.question "acceptedAnswer" (dict "@type" "Answer" "text" $item.answer)) -}}
                    {{- end -}}
                {{- end -}}
            {{- end -}}
        {{- end -}}
    {{- end -}}

    {{- if $faqItems -}}
        {{- $schema := dict "@context" "https://schema.org" "@type" "FAQPage" "mainEntity" $faqItems -}}
<script type="application/ld+json">
{{ $schema | jsonify (dict "indent" "    ") | safeJS }}
</script>
    {{- end -}}
{{- end -}}
