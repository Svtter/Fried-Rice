{{- $orgName := .Site.Title -}}
{{- $orgURL := .Site.BaseURL | absURL -}}
{{- $orgLogo := "" -}}
{{- $orgDescription := .Site.Params.description | default .Site.Params.subtitle -}}

{{- with .Site.Params.logo -}}
    {{- $orgLogo = . | absURL -}}
{{- else -}}
    {{- $orgLogo = "/img/avatar.png" | absURL -}}
{{- end -}}

<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Organization",
    "url": {{ $orgURL | jsonify }},
    "name": {{ $orgName | jsonify }},
    {{- with $orgDescription }}
    "description": {{ . | jsonify }},
    {{- end }}
    "logo": {{ $orgLogo | jsonify }},
    {{- with .Site.Author.name }}
    "founder": {
        "@type": "Person",
        "name": {{ . | jsonify }}
    },
    {{- end }}
    {{- with .Site.Author.homepage }}
    "founder": {
        "@type": "Person",
        "url": {{ . | absURL | jsonify }}
    },
    {{- end }}
    {{- with .Site.Params.seo.organization -}}
        {{- with .sameAs }}
        "sameAs": {{ . | jsonify }},
        {{- end -}}
        {{- with .contactPoint }}
        "contactPoint": {
            "@type": "ContactPoint",
            {{- with .type }}
            "contactType": {{ . | jsonify }},
            {{- end -}}
            {{- with .email }}
            "email": {{ . | jsonify }},
            {{- end -}}
            {{- with .telephone }}
            "telephone": {{ . | jsonify }},
            {{- end -}}
            {{- with .areaServed }}
            "areaServed": {{ . | jsonify }},
            {{- end -}}
            {{- with .availableLanguage }}
            "availableLanguage": {{ . | jsonify }}
            {{- end }}
        },
        {{- end -}}
        {{- with .address }}
        "address": {
            "@type": "PostalAddress",
            {{- with .streetAddress }}
            "streetAddress": {{ . | jsonify }},
            {{- end -}}
            {{- with .addressLocality }}
            "addressLocality": {{ . | jsonify }},
            {{- end -}}
            {{- with .addressRegion }}
            "addressRegion": {{ . | jsonify }},
            {{- end -}}
            {{- with .postalCode }}
            "postalCode": {{ . | jsonify }},
            {{- end -}}
            {{- with .addressCountry }}
            "addressCountry": {{ . | jsonify }}
            {{- end }}
        },
        {{- end -}}
        {{- with .foundingDate }}
        "foundingDate": {{ . | jsonify }},
        {{- end -}}
    {{- end -}}
    {{- /* SameAs from author social links */ -}}
    {{- if not .Site.Params.seo.organization.sameAs -}}
        {{- $sameAs := slice -}}
        {{- with .Site.Author.github -}}
            {{- $sameAs = $sameAs | append (printf "https://github.com/%s" .) -}}
        {{- end -}}
        {{- with .Site.Author.twitter -}}
            {{- $sameAs = $sameAs | append (printf "https://twitter.com/%s" .) -}}
        {{- end -}}
        {{- with .Site.Author.linkedin -}}
            {{- $sameAs = $sameAs | append (printf "https://linkedin.com/in/%s" .) -}}
        {{- end -}}
        {{- with $sameAs }}
        "sameAs": {{ . | jsonify }},
        {{- end }}
    {{- end }}
}
</script>
